<div class="search-wrapper">
  <div class="grid" style="grid-template-columns: 1fr 3fr; gap: 10px;">
    <select id="common-search-type" name="keyword_type">
      <option value="word" selected>단어</option>
      <option value="grammar">문법</option>
    </select>
    <input type="search" id="common-search-input" placeholder="검색어를 입력하세요 (예: 가다, -기)" autocomplete="off">
  </div>

  <div id="common-search-results" class="search-results-area"></div>
</div>

<script>
  // [NEW] 공통 검색 결과 렌더링 로직 (Badge 색상 적용)
  // 이 함수는 search_bar를 사용하는 페이지나 analysis_table에서 호출하여 HTML을 생성할 수 있습니다.
  function renderSearchResultItem(item) {
    const gradeNum = item.grade.replace(/[^0-9]/g, '');

    // 색상 매핑 (Solid Colors)
    const colorMap = {
      '1': '#10b981',
      '2': '#3b82f6',
      '3': '#8b5cf6',
      '4': '#f59e0b',
      '5': '#ef4444',
      '6': '#64748b'
    };
    const bgColor = colorMap[gradeNum] || '#94a3b8';

    // onclick 이벤트는 사용하는 곳에서 정의된 함수(selectSearchResult 등)를 호출하도록 가정하거나,
    // 이 문자열을 DOM으로 만든 후 이벤트를 걸어야 합니다.
    // 여기서는 문자열 템플릿만 제공합니다. data 속성을 통해 정보를 전달합니다.
    return `
      <div class="edit-result-item" role="button" tabindex="0"
           data-text="${item.text}" data-grade="${item.grade}" data-pos="${item.pos}" data-desc="${item.desc || item.meaning}">
        <div>
          <strong>${item.text}</strong>
          <span style="font-size:0.85rem; color:#888;">${item.pos}</span>
          <div style="font-size:0.8rem; color:#666;">${item.desc || item.meaning}</div>
        </div>
        <span class="grade-badge" 
              style="background-color: ${bgColor}; color: #fff; padding: 4px 8px; font-size: 0.9em;">
          ${item.grade}
        </span>
      </div>
    `;
  }
</script>